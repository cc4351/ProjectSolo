<!doctype html>
<html>
	<head>
		<title>D3-line</title>
		<script src = "http://d3js.org/d3.v3.min.js"></script>
		<style>
			.path {
			  stroke-dasharray: 1000;
			  stroke-dashoffset: 1000;
			  animation: dash 5s linear alternate infinite;
			}

			@keyframes dash {
			  from {
				stroke-dashoffset: 822;
			  }
			  to {
				stroke-dashoffset: 0;
			  }
			}
		</style>

	</head>

	
	<body>
<!--		<p>D3 practices</p>-->
<!--
		<svg viewBox="0 0 340 333">

		  <path class="path" fill="white" stroke="black" stroke-width="4" d="M66.039,133.545c0,0-21-57,18-67s49-4,65,8
			s30,41,53,27s66,4,58,32s-5,44,18,57s22,46,0,45s-54-40-68-16s-40,88-83,48s11-61-11-80s-79-7-70-41
			C46.039,146.545,53.039,128.545,66.039,133.545z"/>

		</svg>
-->
		
		<script>
			
			var svgContainer = d3.select("body").append("svg")
							 .attr("width", 500)
							 .attr("height", 600);
			
			
			var nodeData = [{ id: 1, x: 100, y: 110 },
							{ id: 2, x: 83, y: 43 },
							{ id: 3, x: 92, y: 28 },
							{ id: 4, x: 49, y: 74 },
							{ id: 5, x: 51, y: 10 },
							{ id: 6, x: 25, y: 98 },
							{ id: 7, x: 77, y: 30 },
							{ id: 8, x: 20, y: 83 },
							{ id: 9, x: 11, y: 63 },
							{ id: 10, x:  4, y: 55 },
							{ id: 11, x:  0, y:  0 },
							{ id: 12, x: 85, y: 100 },
							{ id: 13, x: 60, y: 40 },
							{ id: 14, x: 70, y: 80 },
							{ id: 15, x: 10, y: 20 },
							{ id: 16, x: 40, y: 50 },
							{ id: 17, x: 25, y: 31 }
						  ];
			var lineData = [{from: 1, to: 2, x1: 100, y1: 110, x2: 83, y2: 43}, 
						    {from: 2, to: 3, x1: 83, y1: 43, x2: 92, y2: 28}
						   ];

			var circleAttrs = {
				  cx: function(d) { return d.x*3; },
				  cy: function(d) { return d.y*3; },
				  r: 5
			  };
			
			var lineAttrs = {
				x1: function(d){ return d.x1*3;},
				x2: function(d){ return d.x2*3;},
				y1: function(d){ return d.y1*3;},
				y2: function(d){ return d.y2*3;},
			};
			
			svgContainer.selectAll("circle")
						  .data(nodeData)
						  .enter()
						  .append("circle")
						  .attr(circleAttrs)
						  .attr("id", function(d){return "n" + d.id;});  // Get attributes from circleAttrs var
			
           
			
			svgContainer.selectAll("line")
						.data(lineData)
						.enter()
						.append("line")
						.attr("x1", function(d){return d.x1;})
						.attr("x2", function(d){return d.x2;})
						.attr("y1", function(d){return d.y1;})
						.attr("y2", function(d){return d.y2;})
						.attr("stroke-width", 2);
			
			var l2 = svgContainer.append("line")
								 .attr("x1", 300)
								 .attr("y1", 110*3)
								 .attr("x2", 83*3)
								 .attr("y2", 43*3)
								 .attr("stroke-width", 2)
								 .attr("stroke", "black")
								 .attr("opacity", 0.5);
		
								l2.attr("stroke-dasharray",  207+ " "+207)
								.attr("stroke-dashoffset", 207)
								.transition()
								.delay(1000)
								.duration(2000)
								.ease("linear")
								.attr("stroke-dashoffset", 0);

			var l3 = svgContainer.append("line")
					 .attr("x1", 83*3)
					 .attr("y1", 43*3)
					 .attr("x2", 92*3)
					 .attr("y2", 28*3)
					 .attr("stroke-width", 2)
					 .attr("stroke", "black")
					.attr("opacity", 0.5);
					l3.attr("stroke-dasharray",  52+ " "+52)
					.attr("stroke-dashoffset", 52)
					.transition()
					.delay(1000)
					.duration(2000)
					.ease("linear")
					.attr("stroke-dashoffset", 0);

			var n2 =d3.select("#n2");
					
			var l2act = true;
//			l2.attr("opacity", 1);
			
			n2.on("click", function(){
				var newOpacity;
				newOpacity = l2act?0:0.5;
				l2.style("opacity", newOpacity);
				l3.style("opacity", newOpacity);
				l2act = newOpacity==0.5?true:false;
//				svgContainer.append("text").attr("x", 200).attr("y", 200).text("yay");
			});
			
			
//			svgContainer.append("text")
//						.attr("x", 300)
//							.attr("y", 300)
//							.style("fill", "steelblue")
//							.style("opacity", 1)
//							.text(l2.attr("x1"));
			
			
//			svgContainer.selectAll("line")
//						.attr("opacity", 0.5)
//						.attr("stroke-dasharray", l2.y1 + " "+ l2.y1)
//						.attr("stroke-dashoffset", 10)
//						.transition()
//						.delay(1000)
//						.duration(2000)
//						.ease("linear")
//						.attr("stroke-dashoffset", 0);
			
			
			
			

			
			var cir1 = svgContainer.append("circle")
									.attr("cx", 50)
									.attr("cy", 50)
									.attr("r", 5);
			
			var cir2 = svgContainer.append("circle")
									.attr("cx", 50)
									.attr("cy", 500)
									.attr("r", 10);
			
			var line = svgContainer.append("line")
								 .attr("x1", 50)
								 .attr("y1", 50)
								 .attr("x2", 50)
								 .attr("y2", 500)
								 .attr("stroke-width", 2)
								 .attr("stroke", "black");
			var offset = 450;		
			//http://bl.ocks.org/fryford/2925ecf70ac9d9b51031
			
			line.attr("stroke-dasharray", 450 + " "+ 450)
				.attr("stroke-dashoffset", offset)
				.transition()
				.delay(1000)
				.duration(2000)
				.ease("linear")
				.attr("stroke-dashoffset", 0);
			
//			var text = svgContainer.append("text")
//							.attr("x", 300)
//							.attr("y", 300)
//							.style("fill", "steelblue")
//							.style("opacity", 1)
//							.text("hello world");
			
			line.attr("opacity", 0.5);
		
			
			var active = true;
			
			cir2.on("click", function(){
				var newOpacity;
				newOpacity = active?0:0.5;
				line.style("opacity", newOpacity);
				active = newOpacity==0.5?true:false;
//				svgContainer.append("text").attr("x", 200).attr("y", 200).text("yay");
			});
		

			

				
		</script>
	
	</body>

</html>



